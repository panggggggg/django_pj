{% extends 'components/layout.html' %}
{%load static%}
{% block title %}Post Form{% endblock %}
{% block css %}
<link rel="stylesheet" href="{% static 'post.css' %}">
{% endblock %}
{% block content %}
{% include 'components/nav.html'%}
<div class="container">
    
    <section class="post-section">
        <h1>POST</h1>
        <form action="{% url 'post' %}" method="post" class="post-form" enctype="multipart/form-data">
            {% csrf_token %} 
            <div class="input-group" style="padding-top: 10px;" >{{ form.as_p }}</div>
            <!-- <div class="input-group" style="padding-top: 10px;">
                {{ form.title.label_tag }}
                {{ form.title }}
                {{ form.title.errors }}
            </div>
            <div class="input-group">
                {{ form.body.label_tag }}
                {{ form.body }}
                {{ form.body.errors }}
            </div>
            <div class="input-group">
                {{ form.Category.label_tag }}
                {{ form.Category }}
                {{ form.Category.errors }}
            </div>
             -->

            <div>
                <div id="no-image-message" class="profile-picture">                                
                    <p>No profile image available</p>
                </div>
                <img id="image-preview" style="max-width: 200px; max-height: 200px; display: none;" alt="Image Preview">
            </div>
            <!-- <div class="input-group">
                {{ form.image }}
            </div> -->
                      
            <script type="text/javascript">
                document.getElementById("id_image").addEventListener("change", function(event) {
                    var imageInput = event.target;
                    var reader = new FileReader(); 
                    var preview = document.getElementById("image-preview");
                    var noImageMessage = document.getElementById("no-image-message");
                    
                    // When the file is loaded, set the image preview
                    reader.onload = function(e) {
                        preview.src = e.target.result;
                        preview.style.display = 'block';  // Show the preview
                        noImageMessage.style.display = 'none';  // Hide 'No profile image available' message
                    };
            
                    // If there's an image selected, preview it
                    if (imageInput.files && imageInput.files[0]) {
                        reader.readAsDataURL(imageInput.files[0]);
                    }
                });
            </script>
                              

            <button type="submit" class="post-btn">POST</button>
        </form>
    </section>
</div>

{% endblock %}

